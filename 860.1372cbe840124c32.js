"use strict";(self.webpackChunkaristo_frontend=self.webpackChunkaristo_frontend||[]).push([[860],{9980:(x,Z,o)=>{o.d(Z,{$:()=>a});var r=o(8966),t=o(5e3),p=o(7423);let a=(()=>{class e{constructor(_,u){this.dialogRef=_,this.data=u}ngOnInit(){}}return e.\u0275fac=function(_){return new(_||e)(t.Y36(r.so),t.Y36(r.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-confirm-dialog"]],decls:9,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","cdkFocusInitial","",3,"mat-dialog-close","color"]],template:function(_,u){1&_&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t._uU(3),t.qZA(),t.TgZ(4,"mat-dialog-actions",2),t.TgZ(5,"button",3),t._uU(6,"Cancelar"),t.qZA(),t.TgZ(7,"button",4),t._uU(8),t.qZA(),t.qZA()),2&_&&(t.xp6(1),t.Oqu(u.data.title),t.xp6(2),t.Oqu(u.data.question),t.xp6(4),t.Q6J("mat-dialog-close",!0)("color",u.data.color),t.xp6(1),t.Oqu(u.data.okMessage))},directives:[r.uh,r.xY,r.H8,p.lW,r.ZT],styles:[""]}),e})()},7147:(x,Z,o)=>{o.d(Z,{yM:()=>e,hZ:()=>l,f3:()=>_});var r=o(5e3),t=o(8966),p=o(9808);function a(u,T){1&u&&r.GkF(0)}let e=(()=>{class u{constructor(A,D,b){this.dialogRef=A,this.data=D,this.injector=b,this.cInjector=r.zs3.create({providers:[{provide:_,useValue:D.options.controlId},{provide:l,useValue:this.closeDialog.bind(this)}],parent:this.injector})}ngOnInit(){}closeDialog(){this.data.options.onClose&&this.data.options.onClose(),this.dialogRef.close()}}return u.\u0275fac=function(A){return new(A||u)(r.Y36(t.so),r.Y36(t.WI),r.Y36(r.zs3))},u.\u0275cmp=r.Xpm({type:u,selectors:[["app-container-dialog"]],decls:1,vars:2,consts:[[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(A,D){1&A&&r.YNc(0,a,1,0,"ng-container",0),2&A&&r.Q6J("ngComponentOutlet",D.data.component)("ngComponentOutletInjector",D.cInjector)},directives:[p.$G],styles:[""]}),u})();const l=new r.OlP("app.close-container-dialog"),_=new r.OlP("app.control-id")},3742:(x,Z,o)=>{o.d(Z,{x:()=>l});var r=o(9980),t=o(7147),p=o(5e3),a=o(8966),e=o(7261);let l=(()=>{class _{constructor(T,A){this.dialog=T,this.snackBar=A}showConfirmDIalog(T,A){this.dialog.open(r.$,{width:"300px",data:T}).afterClosed().subscribe(D=>{D&&A()})}showAlert(T,A,D=5e3){this.snackBar.open(T,A,{horizontalPosition:"end",verticalPosition:"top",duration:D})}showContainerDialog(T,A,D){this.dialog.open(t.yM,{width:A,data:{options:D,component:T}})}}return _.\u0275fac=function(T){return new(T||_)(p.LFG(a.uw),p.LFG(e.ux))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},4817:(x,Z,o)=>{o.d(Z,{z:()=>p});var r=o(5e3),t=o(9808);let p=(()=>{class a{constructor(l){this.location=l}onClick(){this.location.back()}}return a.\u0275fac=function(l){return new(l||a)(r.Y36(t.Ye))},a.\u0275dir=r.lG2({type:a,selectors:[["","aristoBackButton",""]],hostBindings:function(l,_){1&l&&r.NdJ("click",function(){return _.onClick()})}}),a})()},459:(x,Z,o)=>{o.d(Z,{t:()=>p});var r=o(9788),t=o(5e3);let p=(()=>{class a extends r.c{get entityString(){return"companies"}getByIdWithEmployees(l){return this.http.get(`${this.url}/${l}/withemployees`,{headers:this.headers})}filterByName(l){return this.http.get(`${this.url}/filterbyname/${l}`,{headers:this.headers})}}return a.\u0275fac=function(){let e;return function(_){return(e||(e=t.n5z(a)))(_||a)}}(),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},3238:(x,Z,o)=>{o.d(Z,{z:()=>z});var r=o(3075),t=o(7147),p=o(433),a=o(5e3),e=o(459),l=o(3086),_=o(1730),u=o(1946),T=o(1083),A=o(9808),D=o(9224),b=o(7423),C=o(4817),B=o(7322),O=o(4107),N=o(508),Y=o(7531);function F(g,E){if(1&g&&(a.TgZ(0,"mat-option",21),a._uU(1),a.qZA()),2&g){const s=E.$implicit;a.Q6J("value",s.id),a.xp6(1),a.hij(" ",s.name," ")}}function S(g,E){if(1&g&&(a.TgZ(0,"mat-option",21),a._uU(1),a.qZA()),2&g){const s=E.$implicit;a.Q6J("value",s.id),a.xp6(1),a.AsE(" ",s.tag," (",s.value,") ")}}function W(g,E){if(1&g&&(a.TgZ(0,"mat-option",21),a.TgZ(1,"span"),a._uU(2),a.qZA(),a._uU(3," | "),a.TgZ(4,"small"),a._uU(5),a.qZA(),a.qZA()),2&g){const s=E.$implicit;a.Q6J("value",s.id),a.xp6(2),a.Oqu(s.name),a.xp6(3),a.hij("NIT: ",s.nit,"")}}function J(g,E){if(1&g){const s=a.EpF();a.TgZ(0,"mat-card"),a.TgZ(1,"div"),a.TgZ(2,"button",1),a._uU(3,"Volver"),a.qZA(),a.TgZ(4,"h1",2),a._uU(5,"Registro de tarifa"),a.qZA(),a.qZA(),a.TgZ(6,"div",3),a.TgZ(7,"mat-card",4),a.TgZ(8,"form",5),a.NdJ("ngSubmit",function(){a.CHM(s);const U=a.MAs(47);return a.oxw().trySave(U)}),a.TgZ(9,"div",6),a.TgZ(10,"div",7),a.TgZ(11,"mat-form-field",8),a.TgZ(12,"mat-label"),a._uU(13,"Tipo de habitaci\xf3n"),a.qZA(),a.TgZ(14,"mat-select",9),a.TgZ(15,"mat-option"),a._uU(16,"Selecciona una opci\xf3n"),a.qZA(),a.YNc(17,F,2,2,"mat-option",10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",7),a.TgZ(19,"mat-form-field",8),a.TgZ(20,"mat-label"),a._uU(21,"N\xfamero de hu\xe9spedes"),a.qZA(),a.TgZ(22,"mat-select",11),a.TgZ(23,"mat-option"),a._uU(24,"Selecciona una opci\xf3n"),a.qZA(),a.YNc(25,S,2,3,"mat-option",10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"div",12),a.TgZ(27,"mat-form-field",8),a.TgZ(28,"mat-label"),a._uU(29,"Valor de la ocupaci\xf3n"),a.qZA(),a._UZ(30,"input",13),a.TgZ(31,"mat-hint"),a._uU(32,"ej. 40.000"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"div",14),a.TgZ(34,"mat-form-field",8),a.TgZ(35,"mat-label"),a._uU(36,"Empresa"),a.qZA(),a.TgZ(37,"mat-select",15),a.TgZ(38,"mat-form-field",16),a.TgZ(39,"input",17,18),a.NdJ("keyup",function(){a.CHM(s);const U=a.MAs(40);return a.oxw().filterCompany(U.value)}),a.qZA(),a.qZA(),a.TgZ(41,"mat-option"),a._uU(42,"Ninguna"),a.qZA(),a.YNc(43,W,6,3,"mat-option",10),a.qZA(),a.TgZ(44,"mat-hint"),a._uU(45,"ej. Almac\xe9n 3B"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(46,"button",19,20),a._uU(48,"Registrar tarifa"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&g){const s=a.oxw();a.xp6(8),a.Q6J("formGroup",s.form),a.xp6(6),a.Q6J("required",!0),a.xp6(3),a.Q6J("ngForOf",s.roomTypes),a.xp6(5),a.Q6J("required",!0),a.xp6(3),a.Q6J("ngForOf",s.occupancies),a.xp6(12),a.Q6J("disabled",!!s.companyId)("compareWith",s.compareElements),a.xp6(6),a.Q6J("ngForOf",s.companies)}}function K(g,E){if(1&g&&(a.TgZ(0,"mat-option",21),a._uU(1),a.qZA()),2&g){const s=E.$implicit;a.Q6J("value",s.id),a.xp6(1),a.hij(" ",s.name," ")}}function Q(g,E){if(1&g&&(a.TgZ(0,"mat-option",21),a._uU(1),a.qZA()),2&g){const s=E.$implicit;a.Q6J("value",s.id),a.xp6(1),a.AsE(" ",s.tag," (",s.value,") ")}}function $(g,E){if(1&g){const s=a.EpF();a.TgZ(0,"mat-card"),a.TgZ(1,"form",5),a.NdJ("ngSubmit",function(){a.CHM(s);const U=a.MAs(27);return a.oxw().trySave(U)}),a.TgZ(2,"div",6),a.TgZ(3,"div",7),a.TgZ(4,"mat-form-field",8),a.TgZ(5,"mat-label"),a._uU(6,"Tipo de habitaci\xf3n"),a.qZA(),a.TgZ(7,"mat-select",9),a.TgZ(8,"mat-option"),a._uU(9,"Selecciona una opci\xf3n"),a.qZA(),a.YNc(10,K,2,2,"mat-option",10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",7),a.TgZ(12,"mat-form-field",8),a.TgZ(13,"mat-label"),a._uU(14,"N\xfamero de hu\xe9spedes"),a.qZA(),a.TgZ(15,"mat-select",11),a.TgZ(16,"mat-option"),a._uU(17,"Selecciona una opci\xf3n"),a.qZA(),a.YNc(18,Q,2,3,"mat-option",10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(19,"div",22),a.TgZ(20,"mat-form-field",8),a.TgZ(21,"mat-label"),a._uU(22,"Valor de la ocupaci\xf3n"),a.qZA(),a._UZ(23,"input",13),a.TgZ(24,"mat-hint"),a._uU(25,"ej. 40.000"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(26,"button",19,20),a._uU(28,"Registrar tarifa"),a.qZA(),a.qZA(),a.qZA()}if(2&g){const s=a.oxw();a.xp6(1),a.Q6J("formGroup",s.form),a.xp6(6),a.Q6J("required",!0),a.xp6(3),a.Q6J("ngForOf",s.roomTypes),a.xp6(5),a.Q6J("required",!0),a.xp6(3),a.Q6J("ngForOf",s.occupancies)}}let z=(()=>{class g{constructor(s,y,U,P,j,c,v,m,h){this.fb=s,this.companiesS=y,this.roomTypesS=U,this.occupanciesS=P,this.tariffsS=j,this.router=c,this.activatedRoute=v,this.controlId=m,this.closeDialog=h,this.compareElements=p.L,this.roomTypesS.list().subscribe(M=>this.roomTypes=M),this.occupanciesS.list().subscribe(M=>this.occupancies=M),this.form=this.fb.group({roomTypeId:[0,r.kI.required],occupancyId:[0,r.kI.required],value:[0,r.kI.required],companyId:[null]})}filterCompany(s){this.companiesS.filterByName(s.toUpperCase()).subscribe(y=>this.companies=y)}ngOnInit(){let s;(s=this.controlId||this.activatedRoute.snapshot.queryParams.company)&&(this.companiesS.getById(s).subscribe(y=>this.companies=[y]),this.companyId=s||this.controlId,this.form.patchValue({companyId:this.companyId}))}trySave(s){if(this.form.valid){const y=s._elementRef.nativeElement;y.disabled=!0,y.classList.add("mat-button-disabled"),this.tariffsS.save(this.form.value).subscribe({next:U=>{"success"==U.type?this.controlId?this.closeDialog():this.router.navigate(["/dashboard/settings/tariffs"]):("SequelizeUniqueConstraintError"==U.error&&console.log("Alerta","ya existe una tarifa con esta configuraci\xf3n."),y.disabled=!1,y.classList.remove("mat-button-disabled"))}})}}}return g.\u0275fac=function(s){return new(s||g)(a.Y36(r.qu),a.Y36(e.t),a.Y36(l.p),a.Y36(_.I),a.Y36(u.M),a.Y36(T.F0),a.Y36(T.gz),a.Y36(t.f3),a.Y36(t.hZ))},g.\u0275cmp=a.Xpm({type:g,selectors:[["app-create-tariff"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-raised-button","","aristoBackButton","","color","warn",1,"float-start"],[1,"title"],[1,"row","justify-content-md-center"],[1,"col-8","offeset-2"],[3,"formGroup","ngSubmit"],[1,"row","mb-4"],[1,"col-6","mb-3"],["appearance","fill",1,"w-100"],["formControlName","roomTypeId",3,"required"],[3,"value",4,"ngFor","ngForOf"],["formControlName","occupancyId",3,"required"],[1,"col-5"],["matInput","","placeholder","Tel\xe9fono","formControlName","value","required","","type","number","min","10000","step","1000"],[1,"col-7","mb-3"],["formControlName","companyId",3,"disabled","compareWith"],["appearance","fill",1,"select-search-field","w-100"],["matInput","","placeholder","Empresa","type","text",3,"keyup"],["companyField",""],["mat-raised-button","","color","primary",1,"w-100"],["submitButton",""],[3,"value"],[1,"col-12"]],template:function(s,y){1&s&&(a.YNc(0,J,49,8,"mat-card",0),a.YNc(1,$,29,5,"mat-card",0)),2&s&&(a.Q6J("ngIf",!y.companyId),a.xp6(1),a.Q6J("ngIf",y.companyId))},directives:[A.O5,D.a8,b.lW,C.z,r._Y,r.JL,r.sg,B.KE,B.hX,O.gD,r.JJ,r.u,r.Q7,N.ey,A.sg,Y.Nt,r.Fj,r.wV,r.qQ,B.bx],styles:[""]}),g})()},370:(x,Z,o)=>{o.d(Z,{x:()=>L});var r=o(433),t=o(5e3),p=o(1946),a=o(3742),e=o(459),l=o(1083),_=o(9808),u=o(9224),T=o(7322),A=o(7531),D=o(3874),b=o(4107),C=o(508),B=o(7423),O=o(4999);function N(i,f){1&i&&(t.TgZ(0,"span"),t._uU(1," de la empresa"),t.qZA())}function Y(i,f){if(1&i&&(t.TgZ(0,"mat-option",22),t.TgZ(1,"span"),t._uU(2),t.qZA(),t._uU(3," | "),t.TgZ(4,"small"),t._uU(5),t.qZA(),t.qZA()),2&i){const n=f.$implicit;t.Q6J("value",n.id),t.xp6(2),t.Oqu(n.name),t.xp6(3),t.hij("NIT: ",n.nit,"")}}function F(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Tipo de habitaci\xf3n"),t.qZA())}function S(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.Oqu(n.roomType.name)}}function W(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Cantidad de hu\xe9spedes"),t.qZA())}function J(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.AsE("",n.occupancy.tag," (",n.occupancy.value,")")}}function K(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Valor ($)"),t.qZA())}function Q(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.Oqu(t.gM2(2,1,n.value,"COP","","3.0"))}}function $(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Acciones"),t.qZA())}const z=function(i){return[i]};function g(i,f){if(1&i){const n=t.EpF();t.TgZ(0,"td",24),t.TgZ(1,"a",25),t.TgZ(2,"mat-icon"),t._uU(3,"toc"),t.qZA(),t.qZA(),t.TgZ(4,"button",26),t.NdJ("click",function(){const q=t.CHM(n).$implicit;return t.oxw(2).showDeleteDialog(q)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const n=f.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,z,n.id))}}function E(i,f){1&i&&t._UZ(0,"tr",27)}function s(i,f){1&i&&t._UZ(0,"tr",28)}const y=function(i){return{company:i}};function U(i,f){if(1&i){const n=t.EpF();t.TgZ(0,"mat-card"),t.TgZ(1,"h1",2),t._uU(2,"Tarifas registradas "),t.YNc(3,N,2,0,"span",0),t.qZA(),t.TgZ(4,"div"),t.TgZ(5,"mat-form-field",3),t.TgZ(6,"mat-label"),t._uU(7,"Buscar tarifa"),t.qZA(),t.TgZ(8,"input",4),t.NdJ("keyup",function(I){return t.CHM(n),t.oxw().applyFilter(I)}),t.qZA(),t.TgZ(9,"mat-icon",5),t._uU(10,"search"),t.qZA(),t.qZA(),t.TgZ(11,"mat-form-field",3),t.TgZ(12,"mat-label"),t._uU(13,"Empresa"),t.qZA(),t.TgZ(14,"mat-select",6,7),t.NdJ("valueChange",function(){t.CHM(n);const I=t.MAs(15);return t.oxw().selectCompany(I)})("valueChange",function(I){return t.CHM(n),t.oxw().companyId=I}),t.TgZ(16,"mat-form-field",8),t.TgZ(17,"input",9,10),t.NdJ("keyup",function(){t.CHM(n);const I=t.MAs(18);return t.oxw().filterCompany(I.value)}),t.qZA(),t.qZA(),t.TgZ(19,"mat-option"),t._uU(20,"Ninguna"),t.qZA(),t.YNc(21,Y,6,3,"mat-option",11),t.qZA(),t.TgZ(22,"mat-hint"),t._uU(23,"ej. Almac\xe9n 3B"),t.qZA(),t.qZA(),t.TgZ(24,"a",12),t._uU(25,"Agregar tarifa"),t.qZA(),t.qZA(),t.TgZ(26,"table",13),t.ynx(27,14),t.YNc(28,F,2,0,"th",15),t.YNc(29,S,2,1,"td",16),t.BQk(),t.ynx(30,17),t.YNc(31,W,2,0,"th",15),t.YNc(32,J,2,2,"td",16),t.BQk(),t.ynx(33,18),t.YNc(34,K,2,0,"th",15),t.YNc(35,Q,3,6,"td",16),t.BQk(),t.ynx(36,19),t.YNc(37,$,2,0,"th",15),t.YNc(38,g,7,3,"td",16),t.BQk(),t.YNc(39,E,1,0,"tr",20),t.YNc(40,s,1,0,"tr",21),t.qZA(),t.qZA()}if(2&i){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.companyId),t.xp6(11),t.Q6J("value",n.companyId)("compareWith",n.compareElements),t.xp6(7),t.Q6J("ngForOf",n.companies),t.xp6(3),t.Q6J("queryParams",t.VKq(8,y,n.companyId)),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns)}}function P(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Tipo de habitaci\xf3n"),t.qZA())}function j(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.Oqu(n.roomType.name)}}function c(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Cantidad de hu\xe9spedes"),t.qZA())}function v(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.AsE("",n.occupancy.tag," (",n.occupancy.value,")")}}function m(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Valor ($)"),t.qZA())}function h(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.Oqu(t.gM2(2,1,n.value,"COP","","3.0"))}}function M(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Acciones"),t.qZA())}const H=function(i){return["/dashboard/settings/tariffs",i]};function R(i,f){if(1&i){const n=t.EpF();t.TgZ(0,"td",24),t.TgZ(1,"a",25),t.TgZ(2,"mat-icon"),t._uU(3,"toc"),t.qZA(),t.qZA(),t.TgZ(4,"button",26),t.NdJ("click",function(){const q=t.CHM(n).$implicit;return t.oxw(2).showDeleteDialog(q)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const n=f.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,H,n.id))}}function V(i,f){1&i&&t._UZ(0,"tr",27)}function w(i,f){1&i&&t._UZ(0,"tr",28)}function G(i,f){if(1&i&&(t.TgZ(0,"table",13),t.ynx(1,14),t.YNc(2,P,2,0,"th",15),t.YNc(3,j,2,1,"td",16),t.BQk(),t.ynx(4,17),t.YNc(5,c,2,0,"th",15),t.YNc(6,v,2,2,"td",16),t.BQk(),t.ynx(7,18),t.YNc(8,m,2,0,"th",15),t.YNc(9,h,3,6,"td",16),t.BQk(),t.ynx(10,19),t.YNc(11,M,2,0,"th",15),t.YNc(12,R,7,3,"td",16),t.BQk(),t.YNc(13,V,1,0,"tr",20),t.YNc(14,w,1,0,"tr",21),t.qZA()),2&i){const n=t.oxw();t.Q6J("dataSource",n.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns)}}let L=(()=>{class i{constructor(n,d,I,q,k){this.tariffsS=n,this.dialogS=d,this.companiesS=I,this.router=q,this.activatedRoute=k,this.compareElements=r.L,this.displayedColumns=["roomType","guestsNumber","occupancyValue","actions"]}ngOnInit(){let n;(n=this.companyInput||this.activatedRoute.snapshot.queryParams.company)?(this.companiesS.getById(n).subscribe(d=>this.companies=[d]),this.tariffsS.listByCompanyId(n).subscribe(d=>this.dataSource=d),this.companyId=n||this.companyInput):(this.companies=[],this.tariffsS.list().subscribe(d=>this.dataSource=d))}filterCompany(n){this.companiesS.filterByName(n.toUpperCase()).subscribe(d=>this.companies=d)}selectCompany(n){this.router.navigate(["/dashboard/settings/tariffs"],{queryParams:{company:n.value}}),n.value?this.tariffsS.listByCompanyId(n.value).subscribe(d=>this.dataSource=d):this.tariffsS.list().subscribe(d=>this.dataSource=d)}showDeleteDialog(n){this.dialogS.showConfirmDIalog({color:"warn",title:"Eliminar tarifa",okMessage:"Si, borrar",question:"\xbfConfirmas que quieres borrar esta tarifa?"},()=>this.tariffsS.remove(n.id).subscribe(d=>{"success"==d.type?(this.dialogS.showAlert("Se ha eliminado con exito la tarifa."),this.companyId?this.tariffsS.listByCompanyId(this.companyId).subscribe(I=>this.dataSource=I):this.tariffsS.list().subscribe(I=>this.dataSource=I)):this.dialogS.showAlert("Hubo un error al eliminar la tarifa.")}))}update(){let n;(n=this.companyInput||this.activatedRoute.snapshot.queryParams.company)?(this.companiesS.getById(n).subscribe(d=>this.companies=[d]),this.tariffsS.listByCompanyId(n).subscribe(d=>this.dataSource=d),this.companyId=n||this.companyInput):(this.companies=[],this.tariffsS.list().subscribe(d=>this.dataSource=d))}applyFilter(n){}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(p.M),t.Y36(a.x),t.Y36(e.t),t.Y36(l.F0),t.Y36(l.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list-tariffs"]],inputs:{companyInput:"companyInput"},decls:2,vars:2,consts:[[4,"ngIf"],["mat-table","","class","mat-elevation-z1 w-100",3,"dataSource",4,"ngIf"],[1,"title"],["appearance","fill"],["matInput","","placeholder","Nit o nombre",3,"keyup"],["matSuffix",""],[3,"value","compareWith","valueChange"],["companySelect",""],["appearance","fill",1,"select-search-field","w-100"],["matInput","","placeholder","Empresa","type","text",3,"keyup"],["companyField",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","routerLink","create",1,"float-end",3,"queryParams"],["mat-table","",1,"mat-elevation-z1","w-100",3,"dataSource"],["matColumnDef","roomType"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","guestsNumber"],["matColumnDef","occupancyValue"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-mini-fab","","color","primary",3,"routerLink"],["mat-mini-fab","","color","warn",2,"margin-left","5px",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,d){1&n&&(t.YNc(0,U,41,10,"mat-card",0),t.YNc(1,G,15,3,"table",1)),2&n&&(t.Q6J("ngIf",!d.companyInput),t.xp6(1),t.Q6J("ngIf",d.companyInput&&d.dataSource&&0!=d.dataSource.length))},directives:[_.O5,u.a8,T.KE,T.hX,A.Nt,D.Hw,T.R9,b.gD,C.ey,_.sg,T.bx,B.zs,l.yS,O.BZ,O.w1,O.fO,O.ge,O.Dz,O.ev,B.lW,O.as,O.XQ,O.nj,O.Gk],pipes:[_.H9],styles:[""]}),i})()},1730:(x,Z,o)=>{o.d(Z,{I:()=>p});var r=o(9788),t=o(5e3);let p=(()=>{class a extends r.c{get entityString(){return"occupancies"}}return a.\u0275fac=function(){let e;return function(_){return(e||(e=t.n5z(a)))(_||a)}}(),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},1860:(x,Z,o)=>{o.r(Z),o.d(Z,{TariffsModule:()=>j});var r=o(9808),t=o(1946),p=o(1083),a=o(3238),e=o(5e3),l=o(9224),_=o(7423),u=o(4817);function T(c,v){if(1&c&&(e.TgZ(0,"tr"),e.TgZ(1,"th",8),e._uU(2,"Empresa"),e.qZA(),e.TgZ(3,"td",9),e._uU(4),e.qZA(),e.qZA()),2&c){const m=e.oxw(2);e.xp6(4),e.Oqu(m.tariff.company.name)}}function A(c,v){if(1&c&&(e.TgZ(0,"tr"),e.TgZ(1,"th",8),e._uU(2,"Tipo de habitaci\xf3n"),e.qZA(),e.TgZ(3,"td",9),e._uU(4),e.qZA(),e.qZA()),2&c){const m=e.oxw(2);e.xp6(4),e.Oqu(m.tariff.roomType.name)}}function D(c,v){if(1&c&&(e.TgZ(0,"mat-card"),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e._uU(3,"Volver"),e.qZA(),e.TgZ(4,"h1",3),e._uU(5,"Detalles de tarifa"),e.qZA(),e.TgZ(6,"a",4),e._uU(7,"Editar"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"mat-card",6),e.TgZ(10,"table",7),e.TgZ(11,"tbody"),e.YNc(12,T,5,1,"tr",0),e.YNc(13,A,5,1,"tr",0),e.TgZ(14,"tr"),e.TgZ(15,"th",8),e._uU(16,"Cantidad de huespedes"),e.qZA(),e.TgZ(17,"td",9),e._uU(18),e.qZA(),e.qZA(),e.TgZ(19,"tr"),e.TgZ(20,"th",8),e._uU(21,"Valor"),e.qZA(),e.TgZ(22,"td",9),e._uU(23),e.ALo(24,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&c){const m=e.oxw();e.xp6(12),e.Q6J("ngIf",m.tariff.company),e.xp6(1),e.Q6J("ngIf",m.tariff.roomType),e.xp6(5),e.AsE("",m.tariff.occupancy.tag," (",m.tariff.occupancy.value,")"),e.xp6(5),e.Oqu(e.gM2(24,5,m.tariff.value,"COP","","3.0"))}}let b=(()=>{class c{constructor(m,h){this.tariffsS=m,this.activatedRoute=h,this.tariffsS.getById(Number(this.activatedRoute.snapshot.params.ID)).subscribe(M=>this.tariff=M)}ngOnInit(){}}return c.\u0275fac=function(m){return new(m||c)(e.Y36(t.M),e.Y36(p.gz))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-details-tariff"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-center","details-header"],["mat-raised-button","","aristoBackButton","","color","warn",1,"float-start"],[1,"title","d-inline"],["mat-raised-button","","color","accent","routerLink","edit",1,"float-end"],[1,"row","justify-content-md-center"],[1,"col-8","offeset-2"],[1,"mat-elevation-z1","w-100","mat-table","text-center"],[1,"mat-header-cell"],[1,"mat-cell"]],template:function(m,h){1&m&&e.YNc(0,D,25,10,"mat-card",0),2&m&&e.Q6J("ngIf",h.tariff)},directives:[r.O5,l.a8,_.lW,u.z,_.zs,p.yS],pipes:[r.H9],styles:[""]}),c})();var C=o(3075),B=o(433),O=o(459),N=o(3086),Y=o(1730),F=o(3742),S=o(7322),W=o(4107),J=o(508),K=o(7531);function Q(c,v){if(1&c&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&c){const m=v.$implicit;e.Q6J("value",m.id),e.xp6(1),e.hij(" ",m.name," ")}}function $(c,v){if(1&c&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&c){const m=v.$implicit;e.Q6J("value",m.id),e.xp6(1),e.AsE(" ",m.tag," (",m.value,") ")}}function z(c,v){if(1&c&&(e.TgZ(0,"mat-option",20),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._uU(3," | "),e.TgZ(4,"small"),e._uU(5),e.qZA(),e.qZA()),2&c){const m=v.$implicit;e.Q6J("value",m.id),e.xp6(2),e.Oqu(m.name),e.xp6(3),e.hij("NIT: ",m.nit,"")}}let g=(()=>{class c{constructor(m,h,M,H,R,V,w,G){this.fb=m,this.companiesS=h,this.roomTypesS=M,this.occupanciesS=H,this.tariffsS=R,this.router=V,this.activatedRoute=w,this.dialogS=G,this.compareElements=B.L,this.roomTypesS.list().subscribe(L=>this.roomTypes=L),this.occupanciesS.list().subscribe(L=>this.occupancies=L),this.form=this.fb.group({id:[null],roomTypeId:[0,C.kI.required],occupancyId:[0,C.kI.required],value:[0,C.kI.required],companyId:[null]}),this.tariffsS.getById(Number(this.activatedRoute.snapshot.params.ID)).subscribe(L=>this.companiesS.getById(L.companyId).subscribe(i=>{i&&(this.companies=[i]),this.form.patchValue(L)}))}filterCompany(m){this.companiesS.filterByName(m.toUpperCase()).subscribe(h=>this.companies=h)}ngOnInit(){}tryUpdate(m){if(this.form.valid){const h=m._elementRef.nativeElement;h.disabled=!0,h.classList.add("mat-button-disabled"),this.tariffsS.update(this.activatedRoute.snapshot.params.ID,this.form.value).subscribe(M=>{"success"==M.type?(this.dialogS.showAlert("Se ha modificado con exito la tarifa.",void 0,5e3),this.form.value.companyId?this.router.navigate(["/dashboard/settings/tariffs"],{queryParams:{company:this.form.value.companyId}}):this.router.navigate(["/dashboard/settings/tariffs"])):(h.disabled=!0,h.classList.remove("mat-button-disabled"))})}}}return c.\u0275fac=function(m){return new(m||c)(e.Y36(C.qu),e.Y36(O.t),e.Y36(N.p),e.Y36(Y.I),e.Y36(t.M),e.Y36(p.F0),e.Y36(p.gz),e.Y36(F.x))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-edit-tariff"]],decls:49,vars:7,consts:[["mat-raised-button","","aristoBackButton","","color","warn",1,"float-start"],[1,"title"],[1,"row","justify-content-md-center"],[1,"col-8","offeset-2"],[3,"formGroup","ngSubmit"],[1,"row","mb-4"],[1,"col-6","mb-3"],["appearance","fill",1,"w-100"],["formControlName","roomTypeId",3,"required"],[3,"value",4,"ngFor","ngForOf"],["formControlName","occupancyId",3,"required"],[1,"col-5"],["matInput","","placeholder","Tel\xe9fono","formControlName","value","required","","type","number","min","10000","step","1000"],[1,"col-7","mb-3"],["formControlName","companyId",3,"compareWith"],["appearance","fill",1,"select-search-field","w-100"],["matInput","","placeholder","Empresa","type","text",3,"keyup"],["companyField",""],["mat-raised-button","","color","primary",1,"w-100"],["submitButton",""],[3,"value"]],template:function(m,h){if(1&m){const M=e.EpF();e.TgZ(0,"mat-card"),e.TgZ(1,"div"),e.TgZ(2,"button",0),e._uU(3,"Volver"),e.qZA(),e.TgZ(4,"h1",1),e._uU(5,"Registro de tarifa"),e.qZA(),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"mat-card",3),e.TgZ(8,"form",4),e.NdJ("ngSubmit",function(){e.CHM(M);const R=e.MAs(47);return h.tryUpdate(R)}),e.TgZ(9,"div",5),e.TgZ(10,"div",6),e.TgZ(11,"mat-form-field",7),e.TgZ(12,"mat-label"),e._uU(13,"Tipo de habitaci\xf3n"),e.qZA(),e.TgZ(14,"mat-select",8),e.TgZ(15,"mat-option"),e._uU(16,"Selecciona una opci\xf3n"),e.qZA(),e.YNc(17,Q,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",6),e.TgZ(19,"mat-form-field",7),e.TgZ(20,"mat-label"),e._uU(21,"N\xfamero de hu\xe9spedes"),e.qZA(),e.TgZ(22,"mat-select",10),e.TgZ(23,"mat-option"),e._uU(24,"Selecciona una opci\xf3n"),e.qZA(),e.YNc(25,$,2,3,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",11),e.TgZ(27,"mat-form-field",7),e.TgZ(28,"mat-label"),e._uU(29,"Valor de la ocupaci\xf3n"),e.qZA(),e._UZ(30,"input",12),e.TgZ(31,"mat-hint"),e._uU(32,"ej. 40.000"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",13),e.TgZ(34,"mat-form-field",7),e.TgZ(35,"mat-label"),e._uU(36,"Empresa"),e.qZA(),e.TgZ(37,"mat-select",14),e.TgZ(38,"mat-form-field",15),e.TgZ(39,"input",16,17),e.NdJ("keyup",function(){e.CHM(M);const R=e.MAs(40);return h.filterCompany(R.value)}),e.qZA(),e.qZA(),e.TgZ(41,"mat-option"),e._uU(42,"Ninguna"),e.qZA(),e.YNc(43,z,6,3,"mat-option",9),e.qZA(),e.TgZ(44,"mat-hint"),e._uU(45,"ej. Almac\xe9n 3B"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"button",18,19),e._uU(48,"Registrar tarifa"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&m&&(e.xp6(8),e.Q6J("formGroup",h.form),e.xp6(6),e.Q6J("required",!0),e.xp6(3),e.Q6J("ngForOf",h.roomTypes),e.xp6(5),e.Q6J("required",!0),e.xp6(3),e.Q6J("ngForOf",h.occupancies),e.xp6(12),e.Q6J("compareWith",h.compareElements),e.xp6(6),e.Q6J("ngForOf",h.companies))},directives:[l.a8,_.lW,u.z,C._Y,C.JL,C.sg,S.KE,S.hX,W.gD,C.JJ,C.u,C.Q7,J.ey,r.sg,K.Nt,C.Fj,C.wV,C.qQ,S.bx],styles:[""]}),c})();const s=[{path:"",component:o(370).x},{path:"create",component:a.z},{path:":ID",component:b},{path:":ID/edit",component:g}];let y=(()=>{class c{}return c.\u0275fac=function(m){return new(m||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[p.Bz.forChild(s)],p.Bz]}),c})();var U=o(898),P=o(7147);let j=(()=>{class c{}return c.\u0275fac=function(m){return new(m||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({providers:[t.M,{provide:P.f3,useValue:""},{provide:P.hZ,useValue:""}],imports:[[r.ez,C.u5,C.UX,y,U.q]]}),c})()},1946:(x,Z,o)=>{o.d(Z,{M:()=>p});var r=o(9788),t=o(5e3);let p=(()=>{class a extends r.c{get entityString(){return"tariffs"}listByCompanyId(l){return this.http.get(`${this.url}/bycompanyid/${l}`,{headers:this.headers})}}return a.\u0275fac=function(){let e;return function(_){return(e||(e=t.n5z(a)))(_||a)}}(),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},9788:(x,Z,o)=>{o.d(Z,{c:()=>e});var r=o(520),t=o(2340),p=o(5e3),a=o(4869);let e=(()=>{class l{constructor(u,T){this.http=u,this.cookiesS=T,this.backendURL=t.N.backendURL,this.url=this.backendURL+this.entityString,this.headers=new r.WM({Authorization:`Bearer ${this.cookiesS.getCookie("aristo_token")}`})}getById(u){return this.http.get(`${this.url}/${u}`,{headers:this.headers})}list(){return this.http.get(`${this.url}`,{headers:this.headers})}save(u){return this.http.post(this.url,u,{headers:this.headers})}update(u,T){return this.http.put(`${this.url}/${u}`,T,{headers:this.headers})}remove(u){return this.http.delete(`${this.url}/${u}`,{headers:this.headers})}get entityString(){return"no"}}return l.\u0275fac=function(u){return new(u||l)(p.LFG(r.eN),p.LFG(a.F))},l.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},3086:(x,Z,o)=>{o.d(Z,{p:()=>p});var r=o(9788),t=o(5e3);let p=(()=>{class a extends r.c{get entityString(){return"room-types"}save(l){throw new Error("Method not implemented.")}update(l,_){throw new Error("Method not implemented.")}}return a.\u0275fac=function(){let e;return function(_){return(e||(e=t.n5z(a)))(_||a)}}(),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},433:(x,Z,o)=>{o.d(Z,{L:()=>r});const r=(t,p)=>t&&p&&t.id==p.id}}]);