"use strict";(self.webpackChunkaristo_frontend=self.webpackChunkaristo_frontend||[]).push([[860],{9980:(M,T,o)=>{o.d(T,{$:()=>a});var r=o(8966),t=o(5e3),p=o(7423);let a=(()=>{class e{constructor(_,u){this.dialogRef=_,this.data=u}ngOnInit(){}}return e.\u0275fac=function(_){return new(_||e)(t.Y36(r.so),t.Y36(r.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-confirm-dialog"]],decls:9,vars:5,consts:[["mat-dialog-title",""],[1,"mat-typography"],["align","end"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","cdkFocusInitial","",3,"mat-dialog-close","color"]],template:function(_,u){1&_&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1),t._uU(3),t.qZA(),t.TgZ(4,"mat-dialog-actions",2),t.TgZ(5,"button",3),t._uU(6,"Cancelar"),t.qZA(),t.TgZ(7,"button",4),t._uU(8),t.qZA(),t.qZA()),2&_&&(t.xp6(1),t.Oqu(u.data.title),t.xp6(2),t.Oqu(u.data.question),t.xp6(4),t.Q6J("mat-dialog-close",!0)("color",u.data.color),t.xp6(1),t.Oqu(u.data.okMessage))},directives:[r.uh,r.xY,r.H8,p.lW,r.ZT],styles:[""]}),e})()},7147:(M,T,o)=>{o.d(T,{yM:()=>e,hZ:()=>l,f3:()=>_});var r=o(5e3),t=o(8966),p=o(9808);function a(u,g){1&u&&r.GkF(0)}let e=(()=>{class u{constructor(y,E,P){this.dialogRef=y,this.data=E,this.injector=P,this.cInjector=r.zs3.create({providers:[{provide:_,useValue:E.options.controlId},{provide:l,useValue:this.closeDialog.bind(this)}],parent:this.injector})}ngOnInit(){}closeDialog(){this.data.options.onClose&&this.data.options.onClose(),this.dialogRef.close()}}return u.\u0275fac=function(y){return new(y||u)(r.Y36(t.so),r.Y36(t.WI),r.Y36(r.zs3))},u.\u0275cmp=r.Xpm({type:u,selectors:[["app-container-dialog"]],decls:1,vars:2,consts:[[4,"ngComponentOutlet","ngComponentOutletInjector"]],template:function(y,E){1&y&&r.YNc(0,a,1,0,"ng-container",0),2&y&&r.Q6J("ngComponentOutlet",E.data.component)("ngComponentOutletInjector",E.cInjector)},directives:[p.$G],styles:[""]}),u})();const l=new r.OlP("app.close-container-dialog"),_=new r.OlP("app.control-id")},3742:(M,T,o)=>{o.d(T,{x:()=>l});var r=o(9980),t=o(7147),p=o(5e3),a=o(8966),e=o(7261);let l=(()=>{class _{constructor(g,y){this.dialog=g,this.snackBar=y}showConfirmDIalog(g,y){this.dialog.open(r.$,{width:"300px",data:g}).afterClosed().subscribe(E=>{E&&y()})}showAlert(g,y,E=5e3){this.snackBar.open(g,y,{horizontalPosition:"end",verticalPosition:"top",duration:E})}showContainerDialog(g,y,E){this.dialog.open(t.yM,{width:y,data:{options:E,component:g}})}}return _.\u0275fac=function(g){return new(g||_)(p.LFG(a.uw),p.LFG(e.ux))},_.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},4817:(M,T,o)=>{o.d(T,{z:()=>p});var r=o(5e3),t=o(9808);let p=(()=>{class a{constructor(l){this.location=l}onClick(){this.location.back()}}return a.\u0275fac=function(l){return new(l||a)(r.Y36(t.Ye))},a.\u0275dir=r.lG2({type:a,selectors:[["","aristoBackButton",""]],hostBindings:function(l,_){1&l&&r.NdJ("click",function(){return _.onClick()})}}),a})()},459:(M,T,o)=>{o.d(T,{t:()=>p});var r=o(9788),t=o(5e3);let p=(()=>{class a extends r.c{get entityString(){return"companies"}getByIdWithEmployees(l){return this.http.get(`${this.url}/${l}/withemployees`,{headers:this.headers})}filterByName(l){return this.http.get(`${this.url}/filterbyname/${l}`,{headers:this.headers})}}return a.\u0275fac=function(){let e;return function(_){return(e||(e=t.n5z(a)))(_||a)}}(),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},3238:(M,T,o)=>{o.d(T,{z:()=>Q});var r=o(3075),t=o(7147),p=o(433),a=o(5e3),e=o(459),l=o(3086),_=o(1946),u=o(1083),g=o(9808),y=o(9224),E=o(7423),P=o(4817),Z=o(7322),S=o(4107),I=o(508),Y=o(7531);function F(h,U){if(1&h&&(a.TgZ(0,"mat-option",22),a._uU(1),a.qZA()),2&h){const c=U.$implicit;a.Q6J("value",c.id),a.xp6(1),a.hij(" ",c.name," ")}}function B(h,U){if(1&h&&(a.TgZ(0,"mat-option",22),a.TgZ(1,"span"),a._uU(2),a.qZA(),a._uU(3," | "),a.TgZ(4,"small"),a._uU(5),a.qZA(),a.qZA()),2&h){const c=U.$implicit;a.Q6J("value",c.id),a.xp6(2),a.Oqu(c.name),a.xp6(3),a.hij("NIT: ",c.nit,"")}}function W(h,U){if(1&h){const c=a.EpF();a.TgZ(0,"mat-card"),a.TgZ(1,"div"),a.TgZ(2,"button",1),a._uU(3,"Volver"),a.qZA(),a.TgZ(4,"h1",2),a._uU(5,"Registro de tarifa"),a.qZA(),a.qZA(),a.TgZ(6,"div",3),a.TgZ(7,"mat-card",4),a.TgZ(8,"form",5),a.NdJ("ngSubmit",function(){a.CHM(c);const O=a.MAs(46);return a.oxw().trySave(O)}),a.TgZ(9,"div",6),a.TgZ(10,"div",7),a.TgZ(11,"mat-form-field",8),a.TgZ(12,"mat-label"),a._uU(13,"Tipo de habitaci\xf3n"),a.qZA(),a.TgZ(14,"mat-select",9),a.TgZ(15,"mat-option"),a._uU(16,"Selecciona una opci\xf3n"),a.qZA(),a.YNc(17,F,2,2,"mat-option",10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",11),a.TgZ(19,"mat-form-field",8),a.TgZ(20,"mat-label"),a._uU(21,"N\xfamero de hu\xe9spedes"),a.qZA(),a._UZ(22,"input",12),a.TgZ(23,"mat-hint"),a._uU(24,"ej. 1"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(25,"div",13),a.TgZ(26,"mat-form-field",8),a.TgZ(27,"mat-label"),a._uU(28,"Valor de la ocupaci\xf3n"),a.qZA(),a._UZ(29,"input",14),a.TgZ(30,"mat-hint"),a._uU(31,"ej. 40.000"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(32,"div",15),a.TgZ(33,"mat-form-field",8),a.TgZ(34,"mat-label"),a._uU(35,"Empresa"),a.qZA(),a.TgZ(36,"mat-select",16),a.TgZ(37,"mat-form-field",17),a.TgZ(38,"input",18,19),a.NdJ("keyup",function(){a.CHM(c);const O=a.MAs(39);return a.oxw().filterCompany(O.value)}),a.qZA(),a.qZA(),a.TgZ(40,"mat-option"),a._uU(41,"Ninguna"),a.qZA(),a.YNc(42,B,6,3,"mat-option",10),a.qZA(),a.TgZ(43,"mat-hint"),a._uU(44,"ej. Almac\xe9n 3B"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(45,"button",20,21),a._uU(47,"Registrar tarifa"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&h){const c=a.oxw();a.xp6(8),a.Q6J("formGroup",c.form),a.xp6(6),a.Q6J("required",!0),a.xp6(3),a.Q6J("ngForOf",c.roomTypes),a.xp6(19),a.Q6J("disabled",!!c.companyId)("compareWith",c.compareElements),a.xp6(6),a.Q6J("ngForOf",c.companies)}}function K(h,U){if(1&h&&(a.TgZ(0,"mat-option",22),a._uU(1),a.qZA()),2&h){const c=U.$implicit;a.Q6J("value",c.id),a.xp6(1),a.hij(" ",c.name," ")}}function J(h,U){if(1&h){const c=a.EpF();a.TgZ(0,"mat-card"),a.TgZ(1,"form",5),a.NdJ("ngSubmit",function(){a.CHM(c);const O=a.MAs(26);return a.oxw().trySave(O)}),a.TgZ(2,"div",6),a.TgZ(3,"div",7),a.TgZ(4,"mat-form-field",8),a.TgZ(5,"mat-label"),a._uU(6,"Tipo de habitaci\xf3n"),a.qZA(),a.TgZ(7,"mat-select",9),a.TgZ(8,"mat-option"),a._uU(9,"Selecciona una opci\xf3n"),a.qZA(),a.YNc(10,K,2,2,"mat-option",10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",11),a.TgZ(12,"mat-form-field",8),a.TgZ(13,"mat-label"),a._uU(14,"N\xfamero de hu\xe9spedes"),a.qZA(),a._UZ(15,"input",12),a.TgZ(16,"mat-hint"),a._uU(17,"ej. 1"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",23),a.TgZ(19,"mat-form-field",8),a.TgZ(20,"mat-label"),a._uU(21,"Valor de la ocupaci\xf3n"),a.qZA(),a._UZ(22,"input",14),a.TgZ(23,"mat-hint"),a._uU(24,"ej. 40.000"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(25,"button",20,21),a._uU(27,"Registrar tarifa"),a.qZA(),a.qZA(),a.qZA()}if(2&h){const c=a.oxw();a.xp6(1),a.Q6J("formGroup",c.form),a.xp6(6),a.Q6J("required",!0),a.xp6(3),a.Q6J("ngForOf",c.roomTypes)}}let Q=(()=>{class h{constructor(c,C,O,b,R,$,s,v){this.fb=c,this.companiesS=C,this.roomTypesS=O,this.tariffsS=b,this.router=R,this.activatedRoute=$,this.controlId=s,this.closeDialog=v,this.compareElements=p.L,this.roomTypesS.list().subscribe(m=>this.roomTypes=m),this.form=this.fb.group({roomTypeId:[0,r.kI.required],guestsNumber:[0,r.kI.required],occupancyValue:[0,r.kI.required],companyId:[null]})}filterCompany(c){this.companiesS.filterByName(c.toUpperCase()).subscribe(C=>this.companies=C)}ngOnInit(){let c;(c=this.controlId||this.activatedRoute.snapshot.queryParams.company)&&(this.companiesS.getById(c).subscribe(C=>this.companies=[C]),this.companyId=c||this.controlId,this.form.patchValue({companyId:this.companyId}))}trySave(c){if(this.form.valid){const C=c._elementRef.nativeElement;C.disabled=!0,C.classList.add("mat-button-disabled"),this.tariffsS.save(this.form.value).subscribe({next:O=>{"success"==O.type?this.controlId?this.closeDialog():this.router.navigate(["/dashboard/settings/tariffs"]):("SequelizeUniqueConstraintError"==O.error&&console.log("Alerta","ya existe una tarifa con esta configuraci\xf3n."),C.disabled=!1,C.classList.remove("mat-button-disabled"))}})}}}return h.\u0275fac=function(c){return new(c||h)(a.Y36(r.qu),a.Y36(e.t),a.Y36(l.p),a.Y36(_.M),a.Y36(u.F0),a.Y36(u.gz),a.Y36(t.f3),a.Y36(t.hZ))},h.\u0275cmp=a.Xpm({type:h,selectors:[["app-create-tariff"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-raised-button","","aristoBackButton","","color","warn",1,"float-start"],[1,"title"],[1,"row","justify-content-md-center"],[1,"col-8","offeset-2"],[3,"formGroup","ngSubmit"],[1,"row","mb-4"],[1,"col-6","mb-3"],["appearance","fill",1,"w-100"],["formControlName","roomTypeId",3,"required"],[3,"value",4,"ngFor","ngForOf"],[1,"col-6"],["matInput","","placeholder","Hu\xe9spedes","formControlName","guestsNumber","required","","type","number","min","1","max","4"],[1,"col-5"],["matInput","","placeholder","Tel\xe9fono","formControlName","occupancyValue","required","","type","number","min","10000","step","1000"],[1,"col-7","mb-3"],["formControlName","companyId",3,"disabled","compareWith"],["appearance","fill",1,"select-search-field","w-100"],["matInput","","placeholder","Empresa","type","text",3,"keyup"],["companyField",""],["mat-raised-button","","color","primary",1,"w-100"],["submitButton",""],[3,"value"],[1,"col-12"]],template:function(c,C){1&c&&(a.YNc(0,W,48,6,"mat-card",0),a.YNc(1,J,28,3,"mat-card",0)),2&c&&(a.Q6J("ngIf",!C.companyId),a.xp6(1),a.Q6J("ngIf",C.companyId))},directives:[g.O5,y.a8,E.lW,P.z,r._Y,r.JL,r.sg,Z.KE,Z.hX,S.gD,r.JJ,r.u,r.Q7,I.ey,g.sg,Y.Nt,r.Fj,r.wV,r.qQ,r.Fd,Z.bx],styles:[""]}),h})()},370:(M,T,o)=>{o.d(T,{x:()=>k});var r=o(433),t=o(5e3),p=o(1946),a=o(3742),e=o(459),l=o(1083),_=o(9808),u=o(9224),g=o(7322),y=o(7531),E=o(3874),P=o(4107),Z=o(508),S=o(7423),I=o(4999);function Y(i,f){1&i&&(t.TgZ(0,"span"),t._uU(1," de la empresa"),t.qZA())}function F(i,f){if(1&i&&(t.TgZ(0,"mat-option",22),t.TgZ(1,"span"),t._uU(2),t.qZA(),t._uU(3," | "),t.TgZ(4,"small"),t._uU(5),t.qZA(),t.qZA()),2&i){const n=f.$implicit;t.Q6J("value",n.id),t.xp6(2),t.Oqu(n.name),t.xp6(3),t.hij("NIT: ",n.nit,"")}}function B(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Tipo de habitaci\xf3n"),t.qZA())}function W(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.Oqu(n.roomType.name)}}function K(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Cantidad de hu\xe9spedes"),t.qZA())}function J(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.Oqu(n.guestsNumber)}}function Q(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Valor ($)"),t.qZA())}function h(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.Oqu(t.gM2(2,1,n.occupancyValue,"COP","","3.0"))}}function U(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Acciones"),t.qZA())}const c=function(i){return[i]};function C(i,f){if(1&i){const n=t.EpF();t.TgZ(0,"td",24),t.TgZ(1,"a",25),t.TgZ(2,"mat-icon"),t._uU(3,"toc"),t.qZA(),t.qZA(),t.TgZ(4,"button",26),t.NdJ("click",function(){const q=t.CHM(n).$implicit;return t.oxw(2).showDeleteDialog(q)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const n=f.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,c,n.id))}}function O(i,f){1&i&&t._UZ(0,"tr",27)}function b(i,f){1&i&&t._UZ(0,"tr",28)}const R=function(i){return{company:i}};function $(i,f){if(1&i){const n=t.EpF();t.TgZ(0,"mat-card"),t.TgZ(1,"h1",2),t._uU(2,"Tarifas registradas "),t.YNc(3,Y,2,0,"span",0),t.qZA(),t.TgZ(4,"div"),t.TgZ(5,"mat-form-field",3),t.TgZ(6,"mat-label"),t._uU(7,"Buscar tarifa"),t.qZA(),t.TgZ(8,"input",4),t.NdJ("keyup",function(D){return t.CHM(n),t.oxw().applyFilter(D)}),t.qZA(),t.TgZ(9,"mat-icon",5),t._uU(10,"search"),t.qZA(),t.qZA(),t.TgZ(11,"mat-form-field",3),t.TgZ(12,"mat-label"),t._uU(13,"Empresa"),t.qZA(),t.TgZ(14,"mat-select",6,7),t.NdJ("valueChange",function(){t.CHM(n);const D=t.MAs(15);return t.oxw().selectCompany(D)})("valueChange",function(D){return t.CHM(n),t.oxw().companyId=D}),t.TgZ(16,"mat-form-field",8),t.TgZ(17,"input",9,10),t.NdJ("keyup",function(){t.CHM(n);const D=t.MAs(18);return t.oxw().filterCompany(D.value)}),t.qZA(),t.qZA(),t.TgZ(19,"mat-option"),t._uU(20,"Ninguna"),t.qZA(),t.YNc(21,F,6,3,"mat-option",11),t.qZA(),t.TgZ(22,"mat-hint"),t._uU(23,"ej. Almac\xe9n 3B"),t.qZA(),t.qZA(),t.TgZ(24,"a",12),t._uU(25,"Agregar tarifa"),t.qZA(),t.qZA(),t.TgZ(26,"table",13),t.ynx(27,14),t.YNc(28,B,2,0,"th",15),t.YNc(29,W,2,1,"td",16),t.BQk(),t.ynx(30,17),t.YNc(31,K,2,0,"th",15),t.YNc(32,J,2,1,"td",16),t.BQk(),t.ynx(33,18),t.YNc(34,Q,2,0,"th",15),t.YNc(35,h,3,6,"td",16),t.BQk(),t.ynx(36,19),t.YNc(37,U,2,0,"th",15),t.YNc(38,C,7,3,"td",16),t.BQk(),t.YNc(39,O,1,0,"tr",20),t.YNc(40,b,1,0,"tr",21),t.qZA(),t.qZA()}if(2&i){const n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.companyId),t.xp6(11),t.Q6J("value",n.companyId)("compareWith",n.compareElements),t.xp6(7),t.Q6J("ngForOf",n.companies),t.xp6(3),t.Q6J("queryParams",t.VKq(8,R,n.companyId)),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns)}}function s(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Tipo de habitaci\xf3n"),t.qZA())}function v(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.Oqu(n.roomType.name)}}function m(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Cantidad de hu\xe9spedes"),t.qZA())}function A(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.Oqu(n.guestsNumber)}}function x(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Valor ($)"),t.qZA())}function z(i,f){if(1&i&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&i){const n=f.$implicit;t.xp6(1),t.Oqu(t.gM2(2,1,n.occupancyValue,"COP","","3.0"))}}function L(i,f){1&i&&(t.TgZ(0,"th",23),t._uU(1,"Acciones"),t.qZA())}const j=function(i){return["/dashboard/settings/tariffs",i]};function V(i,f){if(1&i){const n=t.EpF();t.TgZ(0,"td",24),t.TgZ(1,"a",25),t.TgZ(2,"mat-icon"),t._uU(3,"toc"),t.qZA(),t.qZA(),t.TgZ(4,"button",26),t.NdJ("click",function(){const q=t.CHM(n).$implicit;return t.oxw(2).showDeleteDialog(q)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const n=f.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,j,n.id))}}function N(i,f){1&i&&t._UZ(0,"tr",27)}function H(i,f){1&i&&t._UZ(0,"tr",28)}function G(i,f){if(1&i&&(t.TgZ(0,"table",13),t.ynx(1,14),t.YNc(2,s,2,0,"th",15),t.YNc(3,v,2,1,"td",16),t.BQk(),t.ynx(4,17),t.YNc(5,m,2,0,"th",15),t.YNc(6,A,2,1,"td",16),t.BQk(),t.ynx(7,18),t.YNc(8,x,2,0,"th",15),t.YNc(9,z,3,6,"td",16),t.BQk(),t.ynx(10,19),t.YNc(11,L,2,0,"th",15),t.YNc(12,V,7,3,"td",16),t.BQk(),t.YNc(13,N,1,0,"tr",20),t.YNc(14,H,1,0,"tr",21),t.qZA()),2&i){const n=t.oxw();t.Q6J("dataSource",n.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns)}}let k=(()=>{class i{constructor(n,d,D,q,w){this.tariffsS=n,this.dialogS=d,this.companiesS=D,this.router=q,this.activatedRoute=w,this.compareElements=r.L,this.displayedColumns=["roomType","guestsNumber","occupancyValue","actions"]}ngOnInit(){let n;(n=this.companyInput||this.activatedRoute.snapshot.queryParams.company)?(this.companiesS.getById(n).subscribe(d=>this.companies=[d]),this.tariffsS.listByCompanyId(n).subscribe(d=>this.dataSource=d),this.companyId=n||this.companyInput):(this.companies=[],this.tariffsS.list().subscribe(d=>this.dataSource=d))}filterCompany(n){this.companiesS.filterByName(n.toUpperCase()).subscribe(d=>this.companies=d)}selectCompany(n){this.router.navigate(["/dashboard/settings/tariffs"],{queryParams:{company:n.value}}),n.value?this.tariffsS.listByCompanyId(n.value).subscribe(d=>this.dataSource=d):this.tariffsS.list().subscribe(d=>this.dataSource=d)}showDeleteDialog(n){this.dialogS.showConfirmDIalog({color:"warn",title:"Eliminar tarifa",okMessage:"Si, borrar",question:"\xbfConfirmas que quieres borrar esta tarifa?"},()=>this.tariffsS.remove(n.id).subscribe(d=>{"success"==d.type?(this.dialogS.showAlert("Se ha eliminado con exito la tarifa."),this.companyId?this.tariffsS.listByCompanyId(this.companyId).subscribe(D=>this.dataSource=D):this.tariffsS.list().subscribe(D=>this.dataSource=D)):this.dialogS.showAlert("Hubo un error al eliminar la tarifa.")}))}update(){let n;(n=this.companyInput||this.activatedRoute.snapshot.queryParams.company)?(this.companiesS.getById(n).subscribe(d=>this.companies=[d]),this.tariffsS.listByCompanyId(n).subscribe(d=>this.dataSource=d),this.companyId=n||this.companyInput):(this.companies=[],this.tariffsS.list().subscribe(d=>this.dataSource=d))}applyFilter(n){}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(p.M),t.Y36(a.x),t.Y36(e.t),t.Y36(l.F0),t.Y36(l.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list-tariffs"]],inputs:{companyInput:"companyInput"},decls:2,vars:2,consts:[[4,"ngIf"],["mat-table","","class","mat-elevation-z1 w-100",3,"dataSource",4,"ngIf"],[1,"title"],["appearance","fill"],["matInput","","placeholder","Nit o nombre",3,"keyup"],["matSuffix",""],[3,"value","compareWith","valueChange"],["companySelect",""],["appearance","fill",1,"select-search-field","w-100"],["matInput","","placeholder","Empresa","type","text",3,"keyup"],["companyField",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","routerLink","create",1,"float-end",3,"queryParams"],["mat-table","",1,"mat-elevation-z1","w-100",3,"dataSource"],["matColumnDef","roomType"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","guestsNumber"],["matColumnDef","occupancyValue"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-mini-fab","","color","primary",3,"routerLink"],["mat-mini-fab","","color","warn",2,"margin-left","5px",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,d){1&n&&(t.YNc(0,$,41,10,"mat-card",0),t.YNc(1,G,15,3,"table",1)),2&n&&(t.Q6J("ngIf",!d.companyInput),t.xp6(1),t.Q6J("ngIf",d.companyInput&&d.dataSource&&0!=d.dataSource.length))},directives:[_.O5,u.a8,g.KE,g.hX,y.Nt,E.Hw,g.R9,P.gD,Z.ey,_.sg,g.bx,S.zs,l.yS,I.BZ,I.w1,I.fO,I.ge,I.Dz,I.ev,S.lW,I.as,I.XQ,I.nj,I.Gk],pipes:[_.H9],styles:[""]}),i})()},1860:(M,T,o)=>{o.r(T),o.d(T,{TariffsModule:()=>$});var r=o(9808),t=o(1946),p=o(1083),a=o(3238),e=o(5e3),l=o(9224),_=o(7423),u=o(4817);function g(s,v){if(1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"th",8),e._uU(2,"Empresa"),e.qZA(),e.TgZ(3,"td",9),e._uU(4),e.qZA(),e.qZA()),2&s){const m=e.oxw(2);e.xp6(4),e.Oqu(m.tariff.company.name)}}function y(s,v){if(1&s&&(e.TgZ(0,"tr"),e.TgZ(1,"th",8),e._uU(2,"Tipo de habitaci\xf3n"),e.qZA(),e.TgZ(3,"td",9),e._uU(4),e.qZA(),e.qZA()),2&s){const m=e.oxw(2);e.xp6(4),e.Oqu(m.tariff.roomType.name)}}function E(s,v){if(1&s&&(e.TgZ(0,"mat-card"),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e._uU(3,"Volver"),e.qZA(),e.TgZ(4,"h1",3),e._uU(5,"Detalles de tarifa"),e.qZA(),e.TgZ(6,"a",4),e._uU(7,"Editar"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"mat-card",6),e.TgZ(10,"table",7),e.TgZ(11,"tbody"),e.YNc(12,g,5,1,"tr",0),e.YNc(13,y,5,1,"tr",0),e.TgZ(14,"tr"),e.TgZ(15,"th",8),e._uU(16,"Cantidad de huespedes"),e.qZA(),e.TgZ(17,"td",9),e._uU(18),e.qZA(),e.qZA(),e.TgZ(19,"tr"),e.TgZ(20,"th",8),e._uU(21,"Retefuente"),e.qZA(),e.TgZ(22,"td",9),e._uU(23),e.ALo(24,"currency"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s){const m=e.oxw();e.xp6(12),e.Q6J("ngIf",m.tariff.company),e.xp6(1),e.Q6J("ngIf",m.tariff.roomType),e.xp6(5),e.Oqu(m.tariff.guestsNumber),e.xp6(5),e.Oqu(e.gM2(24,4,m.tariff.occupancyValue,"COP","","3.0"))}}let P=(()=>{class s{constructor(m,A){this.tariffsS=m,this.activatedRoute=A,this.tariffsS.getById(Number(this.activatedRoute.snapshot.params.ID)).subscribe(x=>this.tariff=x)}ngOnInit(){}}return s.\u0275fac=function(m){return new(m||s)(e.Y36(t.M),e.Y36(p.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-details-tariff"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"text-center","details-header"],["mat-raised-button","","aristoBackButton","","color","warn",1,"float-start"],[1,"title","d-inline"],["mat-raised-button","","color","accent","routerLink","edit",1,"float-end"],[1,"row","justify-content-md-center"],[1,"col-8","offeset-2"],[1,"mat-elevation-z1","w-100","mat-table","text-center"],[1,"mat-header-cell"],[1,"mat-cell"]],template:function(m,A){1&m&&e.YNc(0,E,25,9,"mat-card",0),2&m&&e.Q6J("ngIf",A.tariff)},directives:[r.O5,l.a8,_.lW,u.z,_.zs,p.yS],pipes:[r.H9],styles:[""]}),s})();var Z=o(3075),S=o(433),I=o(459),Y=o(3086),F=o(3742),B=o(7322),W=o(4107),K=o(508),J=o(7531);function Q(s,v){if(1&s&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&s){const m=v.$implicit;e.Q6J("value",m.id),e.xp6(1),e.hij(" ",m.name," ")}}function h(s,v){if(1&s&&(e.TgZ(0,"mat-option",21),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._uU(3," | "),e.TgZ(4,"small"),e._uU(5),e.qZA(),e.qZA()),2&s){const m=v.$implicit;e.Q6J("value",m.id),e.xp6(2),e.Oqu(m.name),e.xp6(3),e.hij("NIT: ",m.nit,"")}}let U=(()=>{class s{constructor(m,A,x,z,L,j,V){this.fb=m,this.companiesS=A,this.roomTypesS=x,this.tariffsS=z,this.router=L,this.activatedRoute=j,this.dialogS=V,this.compareElements=S.L,this.roomTypesS.list().subscribe(N=>this.roomTypes=N),this.form=this.fb.group({id:[null],roomTypeId:[0,Z.kI.required],guestsNumber:[0,Z.kI.required],occupancyValue:[0,Z.kI.required],companyId:[null]}),this.tariffsS.getById(Number(this.activatedRoute.snapshot.params.ID)).subscribe(N=>this.companiesS.getById(N.companyId).subscribe(H=>{this.companies=[H],this.form.patchValue(N)}))}filterCompany(m){this.companiesS.filterByName(m.toUpperCase()).subscribe(A=>this.companies=A)}ngOnInit(){}tryUpdate(m){if(this.form.valid){const A=m._elementRef.nativeElement;A.disabled=!0,A.classList.add("mat-button-disabled"),this.tariffsS.update(this.activatedRoute.snapshot.params.ID,this.form.value).subscribe(x=>{"success"==x.type?(this.dialogS.showAlert("Se ha modificado con exito la tarifa.",void 0,5e3),this.form.value.companyId?this.router.navigate(["/dashboard/settings/tariffs"],{queryParams:{company:this.form.value.companyId}}):this.router.navigate(["/dashboard/settings/tariffs"])):(A.disabled=!0,A.classList.remove("mat-button-disabled"))})}}}return s.\u0275fac=function(m){return new(m||s)(e.Y36(Z.qu),e.Y36(I.t),e.Y36(Y.p),e.Y36(t.M),e.Y36(p.F0),e.Y36(p.gz),e.Y36(F.x))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-edit-tariff"]],decls:48,vars:5,consts:[["mat-raised-button","","aristoBackButton","","color","warn",1,"float-start"],[1,"title"],[1,"row","justify-content-md-center"],[1,"col-8","offeset-2"],[3,"formGroup","ngSubmit"],[1,"row","mb-4"],[1,"col-6","mb-3"],["appearance","fill",1,"w-100"],["formControlName","roomTypeId",3,"required"],[3,"value",4,"ngFor","ngForOf"],[1,"col-6"],["matInput","","placeholder","Hu\xe9spedes","formControlName","guestsNumber","required","","type","number","min","1","max","4"],[1,"col-5"],["matInput","","placeholder","Tel\xe9fono","formControlName","occupancyValue","required","","type","number","min","10000","step","1000"],[1,"col-7","mb-3"],["formControlName","companyId",3,"compareWith"],["appearance","fill",1,"select-search-field","w-100"],["matInput","","placeholder","Empresa","type","text",3,"keyup"],["companyField",""],["mat-raised-button","","color","primary",1,"w-100"],["submitButton",""],[3,"value"]],template:function(m,A){if(1&m){const x=e.EpF();e.TgZ(0,"mat-card"),e.TgZ(1,"div"),e.TgZ(2,"button",0),e._uU(3,"Volver"),e.qZA(),e.TgZ(4,"h1",1),e._uU(5,"Registro de tarifa"),e.qZA(),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"mat-card",3),e.TgZ(8,"form",4),e.NdJ("ngSubmit",function(){e.CHM(x);const L=e.MAs(46);return A.tryUpdate(L)}),e.TgZ(9,"div",5),e.TgZ(10,"div",6),e.TgZ(11,"mat-form-field",7),e.TgZ(12,"mat-label"),e._uU(13,"Tipo de habitaci\xf3n"),e.qZA(),e.TgZ(14,"mat-select",8),e.TgZ(15,"mat-option"),e._uU(16,"Selecciona una opci\xf3n"),e.qZA(),e.YNc(17,Q,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",10),e.TgZ(19,"mat-form-field",7),e.TgZ(20,"mat-label"),e._uU(21,"N\xfamero de hu\xe9spedes"),e.qZA(),e._UZ(22,"input",11),e.TgZ(23,"mat-hint"),e._uU(24,"ej. 1"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",12),e.TgZ(26,"mat-form-field",7),e.TgZ(27,"mat-label"),e._uU(28,"Valor de la ocupaci\xf3n"),e.qZA(),e._UZ(29,"input",13),e.TgZ(30,"mat-hint"),e._uU(31,"ej. 40.000"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"div",14),e.TgZ(33,"mat-form-field",7),e.TgZ(34,"mat-label"),e._uU(35,"Empresa"),e.qZA(),e.TgZ(36,"mat-select",15),e.TgZ(37,"mat-form-field",16),e.TgZ(38,"input",17,18),e.NdJ("keyup",function(){e.CHM(x);const L=e.MAs(39);return A.filterCompany(L.value)}),e.qZA(),e.qZA(),e.TgZ(40,"mat-option"),e._uU(41,"Ninguna"),e.qZA(),e.YNc(42,h,6,3,"mat-option",9),e.qZA(),e.TgZ(43,"mat-hint"),e._uU(44,"ej. Almac\xe9n 3B"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"button",19,20),e._uU(47,"Registrar tarifa"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&m&&(e.xp6(8),e.Q6J("formGroup",A.form),e.xp6(6),e.Q6J("required",!0),e.xp6(3),e.Q6J("ngForOf",A.roomTypes),e.xp6(19),e.Q6J("compareWith",A.compareElements),e.xp6(6),e.Q6J("ngForOf",A.companies))},directives:[l.a8,_.lW,u.z,Z._Y,Z.JL,Z.sg,B.KE,B.hX,W.gD,Z.JJ,Z.u,Z.Q7,K.ey,r.sg,J.Nt,Z.Fj,Z.wV,Z.qQ,Z.Fd,B.bx],styles:[""]}),s})();const C=[{path:"",component:o(370).x},{path:"create",component:a.z},{path:":ID",component:P},{path:":ID/edit",component:U}];let O=(()=>{class s{}return s.\u0275fac=function(m){return new(m||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[p.Bz.forChild(C)],p.Bz]}),s})();var b=o(898),R=o(7147);let $=(()=>{class s{}return s.\u0275fac=function(m){return new(m||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[t.M,{provide:R.f3,useValue:""},{provide:R.hZ,useValue:""}],imports:[[r.ez,Z.u5,Z.UX,O,b.q]]}),s})()},1946:(M,T,o)=>{o.d(T,{M:()=>p});var r=o(9788),t=o(5e3);let p=(()=>{class a extends r.c{get entityString(){return"tariffs"}listByCompanyId(l){return this.http.get(`${this.url}/bycompanyid/${l}`,{headers:this.headers})}}return a.\u0275fac=function(){let e;return function(_){return(e||(e=t.n5z(a)))(_||a)}}(),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},9788:(M,T,o)=>{o.d(T,{c:()=>e});var r=o(520),t=o(2340),p=o(5e3),a=o(4869);let e=(()=>{class l{constructor(u,g){this.http=u,this.cookiesS=g,this.backendURL=t.N.backendURL,this.url=this.backendURL+this.entityString,this.headers=new r.WM({Authorization:`Bearer ${this.cookiesS.getCookie("aristo_token")}`})}getById(u){return this.http.get(`${this.url}/${u}`,{headers:this.headers})}list(){return this.http.get(`${this.url}`,{headers:this.headers})}save(u){return this.http.post(this.url,u,{headers:this.headers})}update(u,g){return this.http.put(`${this.url}/${u}`,g,{headers:this.headers})}remove(u){return this.http.delete(`${this.url}/${u}`,{headers:this.headers})}get entityString(){return"no"}}return l.\u0275fac=function(u){return new(u||l)(p.LFG(r.eN),p.LFG(a.F))},l.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},3086:(M,T,o)=>{o.d(T,{p:()=>p});var r=o(9788),t=o(5e3);let p=(()=>{class a extends r.c{get entityString(){return"room-types"}save(l){throw new Error("Method not implemented.")}update(l,_){throw new Error("Method not implemented.")}}return a.\u0275fac=function(){let e;return function(_){return(e||(e=t.n5z(a)))(_||a)}}(),a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},433:(M,T,o)=>{o.d(T,{L:()=>r});const r=(t,p)=>t&&p&&t.id==p.id}}]);